{% extends "dashboard/base_dashboard.html" %}

{% block title %}Reports{% endblock %}
{% block page_class %}reports-page{% endblock %}


{% block content %}

      <!-- Search -->
      <!-- Reports Search (same structure as patients) -->
<section class="reports-search">
  <form method="get" class="reports-search-form" action="{% url 'reports' %}">
    <div class="reports-search-inputs">
      <input
        type="text"
        name="q"
        placeholder="Search by report title..."
        value="{{ request.GET.q|default:'' }}"
        class="reports-search-field"
        autocomplete="off"
      />
      <button type="submit" class="reports-search-btn">Search</button>
    </div>
  </form>
</section>


      <section class="reports-list-section">
  <div class="section-header">
    <h3><i class="fa-solid fa-file-alt"></i> Reports</h3>
    <a href="#" class="btn-view-all">Add New</a>
  </div>

  <div class="reports-table-wrapper">
    <table class="reports-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Author</th>
          <th>Date</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for rep in reports %}
        <tr>
          <td>{{ rep.id }}</td>
          <td>{{ rep.title }}</td>
          <td>{{ rep.author }}</td>
          <td>{{ rep.date }}</td>
          <td><span class="status {{ rep.status|lower }}">{{ rep.status }}</span></td>
          <td>
            <a href="#" class="btn-action view">View</a>
            <a href="#" class="btn-action update">Update</a>
            <a href="#" class="btn-action delete">Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="6">No reports found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="reports-pagination">
    <ul class="pagination-list">
      {% if reports.has_previous %}
        <li><a href="?page={{ reports.previous_page_number }}{% if query %}&q={{ query }}{% endif %}">&laquo; Prev</a></li>
      {% else %}
        <li class="disabled">&laquo; Prev</li>
      {% endif %}

      {% for num in reports.paginator.page_range %}
        {% if reports.number == num %}
          <li class="active-page">{{ num }}</li>
        {% else %}
          <li><a href="?page={{ num }}{% if query %}&q={{ query }}{% endif %}">{{ num }}</a></li>
        {% endif %}
      {% endfor %}

      {% if reports.has_next %}
        <li><a href="?page={{ reports.next_page_number }}{% if query %}&q={{ query }}{% endif %}">Next &raquo;</a></li>
      {% else %}
        <li class="disabled">Next &raquo;</li>
      {% endif %}
    </ul>
  </div>
</section>
{% endblock %}

